# VPS管理系统

VPS管理系统是一个基于Electron的桌面应用程序，用于管理多台VPS服务器，支持SSH连接、Wireguard VPN部署、VPS账单统计等功能。

## 🚀 核心功能

### 服务器管理
- **多服务器支持**: 支持管理多台VPS服务器
- **SSH连接**: 支持密码和私钥认证
- **连接测试**: 实时测试服务器连接状态
- **批量操作**: 支持批量添加和部署
- **IP检测**: 自动检测IP地理位置

### Wireguard VPN管理
- **一键部署**: 自动化Wireguard部署流程
- **智能清理**: 自动检测和清理现有实例
- **多实例支持**: 支持多个Wireguard实例
- **实时监控**: 部署进度实时显示
- **配置管理**: 客户端配置和二维码生成
- **Peer管理**: 支持添加、删除、查看Peer节点

### 账单统计
- **费用计算**: 自动计算VPS使用费用
- **汇率支持**: 多货币汇率转换
- **Excel导出**: 支持Excel格式导出
- **历史记录**: 月度账单历史记录
- **批量管理**: 支持批量添加VPS

## 安装说明

### 开发环境

1. 确保已安装Node.js环境
2. 克隆或下载本仓库
3. 在项目根目录运行：

```bash
npm install
```

### 启动应用

开发模式启动：

```bash
npm run dev
```

或者直接使用：

```bash
npm start
```

### 构建应用程序

```bash
npm run build
```

执行上述命令后，将在`dist`目录下生成安装程序。

## 使用说明

1. 首先添加服务器，填写服务器信息（支持密码认证和私钥认证）
2. 在服务器列表中，可以测试连接、打开SSH终端或删除服务器
3. 在Wireguard部署标签页，选择服务器后点击"一键部署Wireguard"
4. 在SSH终端中也可以直接执行Wireguard部署命令

## 注意事项

- 确保服务器已安装OpenSSH服务器
- 确保服务器网络连接正常
- 推荐使用私钥认证以提高安全性
- 部署Wireguard需要服务器具有root权限

## 许可

MIT

## 系统要求

- Python 3.8+
- 依赖包：见`requirements.txt`

## 配置文件

核心配置文件为`vps_data.yml`，存储所有VPS信息和费用计算结果。

## 数据备份

系统会自动备份VPS数据，但建议定期手动备份`vps_data.yml`文件，以防数据丢失。

## 价格计算逻辑

1. 基础价格：每台VPS按月单价计算
2. NAT费用：使用NAT的VPS额外计算NAT费用
3. 汇率转换：支持不同货币之间的转换

## 常见问题解答

### Q: 为什么VPS信息会丢失？
A: VPS信息现在会自动保存，但如果遇到程序异常退出，可能会导致最近的修改未保存。系统已实现每5分钟的自动保存功能，确保数据不会丢失。

### Q: 如何确保VPS数据不会丢失？
A: 系统已实现自动保存功能，确保在添加、修改或删除VPS后能自动保存数据。同时，系统会定期（每5分钟）进行自动保存，防止因程序异常退出导致的数据丢失。

### Q: 使用时长是如何计算的？
A: 使用时长根据VPS的购买日期到当前时间（或销毁时间）自动计算。

## 📚 文档说明

### 技术文档
- **[项目架构设计.md](项目架构设计.md)**: 完整的系统架构设计文档
- **[Wireguard优化修改说明.md](Wireguard优化修改说明.md)**: Wireguard功能优化详细说明
- **[Wireguard脚本功能流程详解.md](Wireguard脚本功能流程详解.md)**: Wireguard脚本功能详细流程
- **[重新部署功能实现说明.md](重新部署功能实现说明.md)**: 重新部署功能实现说明

### 快速开始
1. 查看[项目架构设计.md](项目架构设计.md)了解系统架构
2. 阅读[Wireguard优化修改说明.md](Wireguard优化修改说明.md)了解最新功能
3. 参考[Wireguard脚本功能流程详解.md](Wireguard脚本功能流程详解.md)了解部署流程

## 📋 更新日志

### 版本1.0.2 (2025-01-10)
- ✅ 修复pandas和numpy版本兼容性问题
- ✅ 优化账单生成错误处理，移除干扰性弹框
- ✅ 增强update_prices方法的异常处理
- ✅ 改进用户体验，静默处理非关键错误
- ✅ 清理重复的桌面快捷方式

### 版本1.1.0 (2025-01-XX)
- ✅ 智能APT锁冲突解决机制
- ✅ Wireguard重新部署功能
- ✅ 实时进度显示优化
- ✅ IPv4地址过滤修复
- ✅ 配置文件查找功能增强
- ✅ 批量VPS管理功能
- ✅ IP地理位置检测功能

### 版本1.0.1 (2025-05-15)
- 添加自动保存功能，确保VPS数据不会丢失
- 优化GUI界面响应速度
- 修复NAT费用计算bug

### 版本1.0.0 (2025-04-25)
- 初始发布版本
